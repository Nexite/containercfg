job: discord-johnpeter
datacenters: [srnd]

tasks:
  johnpeter-discord:
    image: codeday/johnpeter-discord

    resources:
      memory: 100

    volumes:
      share:
        - fileshare: johnpeter-discord
          mountpoint: /app/tourney_data

    vault:
      policies:
        - johnpeterdiscord
        - postgres
      env:
        johnpeterdiscord:
          BOT_TOKEN: BOT_TOKEN
          CLEVERBOT_API_KEY: CLEVERBOT_API_KEY
          RAYGUN_KEY: RAYGUN_KEY
          CONTENTFUL_ACCESS_TOKEN: CONTENTFUL_ACCESS_TOKEN
          CONTENTFUL_SPACE_ID: CONTENTFUL_SPACE_ID
          CATEGORY: CATEGORY
          CHANNEL_ERRORS: CHANNEL_ERRORS
          CHANNEL_GALLERY: CHANNEL_GALLERY
          CHANNEL_MOD_LOG: CHANNEL_MOD_LOG
          CHANNEL_RANDOM: CHANNEL_RANDOM
          MYSQL_DB: MYSQL_DB
          MYSQL_HOST: MYSQL_HOST
          MYSQL_PASS: MYSQL_PASS
          MYSQL_USER: MYSQL_USER
          ROLE_STUDENT: ROLE_STUDENT
        postgres:
          DB_PASSWORD: POSTGRESQL_PASSWORD

