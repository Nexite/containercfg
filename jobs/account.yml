job: account
datacenters: [ srnd ]

tasks:
  account:
    image: "codeday/account"

    resources:
      memory: 256

    vault:
      policies:
        - account
      env:
        account:
          APP_SECRET: APP_SECRET
          APP_URL: APP_URL
          AUTH0_CLIENT_ID: AUTH0_CLIENT_ID
          AUTH0_CLIENT_SECRET: AUTH0_CLIENT_SECRET
          AUTH0_DOMAIN: AUTH0_DOMAIN
          AUTH0_MANAGEMENT_DOMAIN: AUTH0_MANAGEMENT_DOMAIN
          AUTH0_HOOK_SHARED_SECRET: AUTH0_HOOK_SHARED_SECRET
          CONTENTFUL_SPACE_ID: CONTENTFUL_SPACE_ID
          CONTENTFUL_TOKEN: CONTENTFUL_TOKEN
          VOLUNTEER_CODE: VOLUNTEER_CODE

    ports:
      http:
        inner: 3000
        lb:
          domain: account.codeday.xyz
          cert: codeday.xyz
