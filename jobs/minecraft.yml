job: minecraft
datacenters: [ srnd ]

tasks:
  minecraft:
    image: "itzg/minecraft-server"
    args:
      - "--noconsole"

    resources:
      cpu: 7000
      memory: 15250

    volumes:
      share:
        - fileshare: minecraft-plugins
          mountpoint: /plugins
      host:
        - volume: minecraft
          mountpoint: "/data"

    env:
      MEMORY: 8G
      MAX_MEMORY: 15G
      EULA: "TRUE"
      GUI: "FALSE"
      TYPE: PAPER
      VERSION: "1.14.4"
      SERVER_NAME: CodeDay
      MOTD: Everyday is CodeDay if you believe in magic.
      MAX_PLAYERS: 144
      ANNOUNCE_PLAYER_ACHIEVEMENTS: "FALSE"
      ENABLE_COMMAND_BLOCK: "FALSE"
      SPAWN_PROTECTION: 0
      ALLOW_NETHER: "TRUE"

    vault:
      policies:
        - minecraft
      env:
        minecraft:
          OPS: ops

    ports:
      minecraft:
        inner: 25565
        outer: 25565
