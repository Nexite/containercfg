job: discord-moderation
datacenters: [srnd]

tasks:
  discord-moderation:
    image: codeday/discord-moderation

    resources:
      memory: 100

    vault:
      policies:
        - discord-moderation

      env:
        discord-moderation:
          CATEGORIZATION_API_KEY: CATEGORIZATION_API_KEY
          DATABASE_URL: DATABASE_URL
          DISCORD_BOT_TOKEN: DISCORD_BOT_TOKEN
          SAFE_BROWSING_API_KEY: SAFE_BROWSING_API_KEY
          SIGHTENGINE_SECRET: SIGHTENGINE_SECRET
          SIGHTENGINE_USER: SIGHTENGINE_USER
          SYSLOG_HOST: SYSLOG_HOST
          SYSLOG_PORT: SYSLOG_PORT

    env:
      SUPPORT_EMAIL: conduct@codeday.org
      DISCORD_GUILD: "689213562740277361"
      DISCORD_LOG_CHANNEL: "689216590297694211"
      DISCORD_IGNORE_ROLES: 712013102614446101,689215419432698013,712062910897061979,689918363933343806,689215241996730417,779082183901315172
      POINTS_THRESHOLD_BAN: 3
      POINTS_THRESHOLD_LOOKBACK_HR: 24
      POINTS_ADULT_IMAGE: 2
      POINTS_OFFENSIVE_IMAGE: 2
      POINTS_ADULT_TEXT: 1
      POINTS_OFFENSIVE_TEXT: 1
      POINTS_ADULT_LINK: 1
      POINTS_DANGEROUS_LINK: 0
      POINTS_INVITE_LINK: 0
